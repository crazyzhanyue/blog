!function(t,e){"use strict";function n(t){var e="";e=t.length?t.map(function(t){return function(t,e){return t.replace(/\{\w+\}/g,function(t){var n=t.replace(/\{|\}/g,"");return e[n]||""})}(f,{title:t.title,path:("/"+t.path).replace(/\/{2}/g,"/"),date:function(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()-1<9?"0"+e.getMonth():e.getMonth(),a=e.getDate()<9?"0"+e.getDate():e.getDate();return n+"/"+i+"/"+a}(t.date),tags:t.tags.map(function(t){return"<span>#"+t.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="iconfont icon-fly"></i><p>未找到搜索结果，请重新输入！</p></li>',g.innerHTML=e}function i(t,e){return e.lastIndex=0,e.test(t)}function a(t){var e=this.value.trim();if(e){var a=new RegExp(e.replace(/[ ]/g,"|"),"gmi");!function(t){ajax({type:"get",url:"content.json",success:function(e){t(e)}})}(function(t){n(t=JSON.parse(t).filter(function(t){return function(t,e){return i(t.title,e)||t.tags.some(function(t){return i(t.name,e)})||i(t.text,e)}(t,a)})),v.show()}),t.preventDefault()}else v.hide()}var s=e.body,r=e.querySelector.bind(e),c=(e.querySelectorAll.bind(e),r("#search")),o=r("#contentBox"),l=r("#search-warp"),u=r("#key"),d=r("#search-back"),h=r("#search-panel"),g=r("#search-result"),f=r("#search-tpl").innerHTML,p="ontouchstart"in t&&/Mobile|android|iOS|iPhone|iPad|Windows Phone|KEAPWI/i.test(navigator.userAgent)?"touchstart":"click",v={show:function(){t.innerWidth<760&&s.classList.add("lock"),h.classList.add("in")},hide:function(){t.innerWidth<760&&s.classList.remove("lock"),h.classList.remove("in")}};c.addEventListener("click",function(){l.classList.toggle("in"),o&&o.classList.toggle("hide"),r("html").classList.toggle("lock"),u.value="",l.classList.contains("in")?u.focus():u.blur(),v.hide()},!1),d.addEventListener(p,function(){l.classList.remove("in"),o&&o.classList.remove("hide"),r("html").classList.remove("lock"),v.hide()},!1),e.addEventListener(p,function(t){"key"!==t.target.id&&"search-panel"!==t.target.id&&"LI"!==t.target.tagName&&"click"===p&&v.hide()},!1),u.addEventListener("input",a),u.addEventListener(p,a)}(window,document);