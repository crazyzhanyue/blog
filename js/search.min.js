!function(e,t){"use strict";function n(e){var t="";t=e.length?e.map(function(e){return function(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}(f,{title:e.title,path:("/"+e.path).replace(/\/{2}/g,"/"),date:function(e){var t=new Date(e),n=t.getFullYear(),i=t.getMonth()-1<9?"0"+t.getMonth():t.getMonth(),a=t.getDate()<9?"0"+t.getDate():t.getDate();return n+"/"+i+"/"+a}(e.date),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="iconfont icon-fly"></i><p>未找到搜索结果，请重新输入！</p></li>',g.innerHTML=t}function i(e,t){return t.lastIndex=0,t.test(e)}function a(e){var t=this.value.trim();if(t){var a=new RegExp(t.replace(/[ ]/g,"|"),"gmi");!function(e){ajax({type:"get",url:"content.json",success:function(t){e(t)}})}(function(e){n(e=JSON.parse(e).filter(function(e){return function(e,t){return i(e.title,t)||e.tags.some(function(e){return i(e.name,t)})||i(e.text,t)}(e,a)})),v.show()}),e.preventDefault()}else v.hide()}var s=t.body,r=t.querySelector.bind(t),c=(t.querySelectorAll.bind(t),r("#search")),o=r("#contentBox"),l=r("#search-warp"),u=r("#key"),d=r("#search-back"),h=r("#search-panel"),g=r("#search-result"),f=r("#search-tpl").innerHTML,p="ontouchstart"in e&&/Mobile|android|iOS|iPhone|iPad|Windows Phone|KEAPWI/i.test(navigator.userAgent)?"touchstart":"click",v={show:function(){e.innerWidth<760&&s.classList.add("lock"),h.classList.add("in")},hide:function(){e.innerWidth<760&&s.classList.remove("lock"),h.classList.remove("in")}};c.addEventListener("click",function(){l.classList.toggle("in"),o&&o.classList.toggle("hide"),l.scrollIntoView(),u.value="",l.classList.contains("in")?u.focus():u.blur(),v.hide()},!1),d.addEventListener(p,function(){l.classList.remove("in"),o&&o.classList.remove("hide"),r("html").classList.remove("lock"),v.hide()},!1),t.addEventListener(p,function(e){"key"!==e.target.id&&"search-panel"!==e.target.id&&"LI"!==e.target.tagName&&"click"===p&&v.hide()},!1),u.addEventListener("input",a),u.addEventListener(p,a)}(window,document);